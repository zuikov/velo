<ng-template #content let-c="close" let-d="dismiss">
<div class="modal-header">
  <h4 class="modal-title">Оформить заказ</h4>
  <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">

    <form #orderForm="ngForm">

        <div class="form-group">
            <div class="row">
                <label for="name" class="col-sm-4 control-label">Ваше имя *</label>
                <div class="col-sm-8">
                    <input class="form-control" name="name" placeholder="Ваше имя"
                     [(ngModel)]="user.name" #name="ngModel" required />
        
                    <div [hidden]="name.valid || name.untouched" class="alert alert-danger">
                        Не указано имя
                    </div>
                </div>
            </div>
        </div>
        
        <div class="form-group">
            <div class="row">
                <label for="email" class="col-sm-4 control-label">Email *</label>
                <div class="col-sm-8">
                    <input type="email" class="form-control" id="email" name='email'
                    [(ngModel)]="user.email" required pattern="^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$"
                    placeholder="Email" #email="ngModel" />
        
                    <div [hidden]="email.valid || email.untouched" class="alert alert-danger">
                        Некорректный email
                    </div>
                </div>
            </div>
        </div>
        
        <div class="form-group">
            <div class="row">
                <label for="phone" class="col-sm-4 control-label">Телефон</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control" id="phone" 
                    [(ngModel)]="user.phone" name='phone' placeholder="0501234567" #phone="ngModel" 
                    required pattern="[0-9]{10}" />

                    <div [hidden]="phone.valid || phone.untouched" class="alert alert-danger">
                        Некорректный телефон
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="row">
                <label class="col-sm-4 control-label">Способ доставки</label>
                <div class="col-sm-8">
                    <input type="hidden" name="delivery_type" id="delivery-type" value="" />
                    <input type="hidden" name="delivery_summa" id="delivery-summa" value="0" />
                    <input type="hidden" name="full_summa" id="full-summa" value="0" />
                    <div class="radio">
                        <label>
                            <input type="radio" value="Самовывоз" 
                            [(ngModel)]="delivery" name='delivery' />
                            Самовывоз Харьков</label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" value="Новая Почта"
                            [(ngModel)]="delivery" name='delivery' />
                            Новая Почта</label>
                    </div>
                    <br />
                </div>
            </div>
        </div>

        <div class="form-group">
                <div class="row"> 
                  <label for="address" class="col-sm-4 control-label">Адрес доставки</label>
                  <div class="col-sm-8">
                      <textarea class="form-control" id="address" [(ngModel)]="user.address" placeholder="Адрес доставки" row="3" name='address'></textarea>
                  </div>
                </div> 
        </div>

        <div class="form-group">
                <div class="row">   
                  <label for="message" class="col-sm-4 control-label">Сообщение</label>
                  <div class="col-sm-8">
                      <textarea class="form-control" id="message" [(ngModel)]="user.message" placeholder="Дополнительная информация" row="3" name='message'></textarea>
                      <br />
                     
                      <div id="alert-order-done" class="d-none alert alert-success">
                          <button type="button" class="close js-close-alert">&times;</button>
                          <strong>Спасибо за заказ!</strong> Скоро мы с Вами свяжемся
                      </div>
                  </div>
                </div>
        </div>

        <div class="form-group">
                <div class="col-sm-offset-2 col-sm-6">
                    <button id="order-btn" type="submit" class="btn btn-primary" 
                    [disabled]='name.invalid || email.invalid || sendOrderDisabled'
                    (click)="submit(user, delivery)">{{sendOrderValue}}</button>
                </div>
        </div>

        <div *ngIf="dispatchMessage" class="alert alert-success" id="dispatchMessage">
            {{ dispatchMessage }}
        </div>

    </form>

    &hellip;
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-outline-dark" (click)="c('Close click')">Закрыть</button>
</div>
</ng-template>

<button class="btn btn-md btn-outline-primary" [disabled]='orderDisabled' (click)="open(content)">Оформить заказ</button>

<!-- <hr> -->

<!-- <pre>{{closeResult}}</pre> -->
